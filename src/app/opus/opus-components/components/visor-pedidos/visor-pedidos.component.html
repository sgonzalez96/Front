<!-- start page title -->
<app-pagetitle title="Visor Pedidos"></app-pagetitle>
<!-- end page title -->

<div class="card">
    <div class="card-body">
        <div class="register-content">
            <div class="row">
                <div class="col-md-4">
                    Desde
                </div>
                <div class="col-md-4">
                    Hasta
                </div>
                <div class="col-md-4">
                    Estado
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-4">
                    <input type="date" [(ngModel)]="feci" name="feci" class="form-control" value="{{feci}}">
                </div>
                <div class="col-md-4">
                    <input type="date" [(ngModel)]="fecf" name="fecf" class="form-control" value="{{fecf}}">
                </div>
                <div class="col-md-4">
                    <p-dropdown [options]="estados" [(ngModel)]="selectedState" optionLabel="dsc"></p-dropdown>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <button class="btn btn-primary" (click)="cargoData()">Cargar pedidos</button>
                </div>
            </div>
        </div>
        <p-table *ngIf="lista != null && lista.length > 0" class="mt-3" [value]="lista" #sepas dataKey="recordNumber"
            [rows]="10" [showCurrentPageReport]="true" styleClass="p-datatable-customers" [paginator]="true"
            currentPageReportTemplate="{first} a {last} de {totalRecords} pedidos">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="recordNumber">Expediente</th>
                    <th pSortableColumn="documentNumber">Pedido</th>
                    <th pSortableColumn="orderDate">Fecha</th>
                    <th pSortableColumn="clientDsc">Cliente</th>
                    <th pSortableColumn="separationStatus">Estado</th>
                    <th pSortableColumn="separationId">Separación</th>
                    <th pSortableColumn="usuario">Usuario</th>
                    <th></th>
                </tr>
                <tr>
                    <th>
                        <input pInputText style="width: 100%;" type="text"
                            (input)="sepas.filter($event.target.value, 'recordNumber', 'contains')">
                    </th>
                    <th>
                        <input pInputText style="width: 100%;" type="text"
                            (input)="sepas.filter($event.target.value, 'documentNumber', 'contains')">
                    </th>
                    <th>
                        <input pInputText style="width: 100%;" type="text"
                            (input)="sepas.filter($event.target.value, 'orderDate', 'contains')">
                    </th>
                    <th>
                        <input pInputText style="width: 100%;" type="text"
                            (input)="sepas.filter($event.target.value, 'clientDsc', 'contains')">
                    </th>
                    <th>
                        <input pInputText style="width: 100%;" type="text"
                            (input)="sepas.filter($event.target.value, 'separationStatus', 'contains')">
                    </th>
                    <th>
                        <input pInputText style="width: 100%;" type="text"
                            (input)="sepas.filter($event.target.value, 'separationId', 'contains')">
                    </th>
                    <th>
                        <input pInputText style="width: 100%;" type="text"
                            (input)="sepas.filter($event.target.value, 'usuario', 'contains')">
                    </th>
                    <th> </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>{{item.recordNumber}}</td>
                    <td>{{item.documentNumber}}</td>
                    <td>{{item.orderDate | date: 'dd/MM/yyyy'}}</td>
                    <td>{{item.clientDsc}}</td>
                    <td>{{item.separationStatus | status}}</td>
                    <td>{{item.separationId}}</td>
                    <td>{{item.usuario}}</td>
                    <td>
                        <button (click)="zoomPedido(item)" class="btn btn-success"><i class="fas fa-eye"
                                title="Zoom pedido"></i></button>
                        <button *ngIf="item.separationId != null" (click)="zoomSeparacion(item.separationId)"
                            class="btn btn-warning"><i class="fas fa-eye" title="Zoom separación"></i></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>

</div>