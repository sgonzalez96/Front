<!-- start page title -->
<app-pagetitle title="Sesiones envio"></app-pagetitle>
<!-- end page title -->


<div class="card">
  <div class="card-body">
    <div class="register-content">
      <div class="row">
        <div class="col-md-4 mb-2">
          Fecha desde
        </div>
        <div class="col-md-4 mb-2">
          Fecha hasta
        </div>
        <div class="col-md-4 mb-2">
          Estado
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <input type="date" name="txtfeci" class="form-control" [(ngModel)]="feci">
        </div>
        <div class="col-md-4">
          <input type="date" name="txtfecf" class="form-control" [(ngModel)]="fecf">
        </div>
        <div class="col-md-4">
          <p-dropdown [options]="estados" [(ngModel)]="selectedEstado" optionLabel="dsc"></p-dropdown>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4 mb-2">
          Depósito
        </div>
        <div class="col-md-4 mb-2">

        </div>
        <div class="col-md-4 mb-2">

        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <p-dropdown [options]="losdepos" [(ngModel)]="selectedDepo" optionLabel="dsc"></p-dropdown>
        </div>
        <div class="col-md-4">

        </div>
        <div class="col-md-4">
          <button class="btn btn-primary float-right" (click)="cargoData()">Cargar</button>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Tabla de sesiones -->
<div class="row mt-2">
  <div class="col-md-12">
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">#Id</th>
          <th scope="col">Descripción</th>
          <th scope="col">Fecha</th>
          <th scope="col">Estado</th>
          <th scope="col">Usuario</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of sesiones">
          <th scope="row">{{item.id}}</th>
          <td>{{item.description}}</td>
          <td>{{item.creationDate | date:'dd/MM/yyyy'}}</td>
          <td>{{item.status}}</td>
          <td>{{item.user.operatorDsc}}</td>
          <td>
            <button (click)="detalle(item)" class="btn btn-success">Detalle</button>
          </td>
          <td>
            <button (click)="verSD(item)" class="btn btn-success">Ver SD</button>
          </td>
          <td>
            <button (click)="paquetes(item)" class="btn btn-success">Paquetes</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<!-- Fin tabla de sesiones -->
  <ng-template #dialogDetalle let-c="close" let-d="dismiss" style="height: 80px;">
    <div class="modal-header">
      <h4 class="modal-title">Detalles de la sesión</h4>
      <button type="button" class="close" (click)="d('Cross click')">×</button>
    </div>
    <div class="modal-body">
      <app-detalle-envio [sesion]="selectedSesion"></app-detalle-envio>
    </div>
    <div class="modal-footer">
      <button class="btn btn-white" (click)="c('Close click')">Cerrar</button>
    </div>
  </ng-template>

  <ng-template #dialogPaquetes let-c="close" let-d="dismiss" style="height: 80px;">
    <div class="modal-header">
      <h4 class="modal-title">Paquetes de la sesión</h4>
      <button type="button" class="close" (click)="d('Cross click')">×</button>
    </div>
    <div class="modal-body">
      <app-paquetes-envio [sesion]="selectedSesion"></app-paquetes-envio>
    </div>
    <div class="modal-footer">
      <button class="btn btn-white" (click)="c('Close click')">Cerrar</button>
    </div>
  </ng-template>

  <ng-template #dialogSD let-c="close" let-d="dismiss" style="height: 80px;">
    <div class="modal-header">
      <h4 class="modal-title">SDs de la sesión</h4>
      <button type="button" class="close" (click)="d('Cross click')">×</button>
    </div>
    <div class="modal-body">
      <app-sds-envio [sesion]="selectedSesion"></app-sds-envio>
    </div>
    <div class="modal-footer">
      <button class="btn btn-white" (click)="c('Close click')">Cerrar</button>
    </div>
  </ng-template>